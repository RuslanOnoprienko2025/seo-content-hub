---
import Layout from './Layout.astro';
const { title, seo_title, description, image, show_image, project } = Astro.props;
const content = { title, seo_title, description, image, show_image, project };
---
<Layout title={content.seo_title || content.title} description={content.description} image={content.image} project={content.project}>
    <article>
        <div style="text-transform: uppercase; letter-spacing: 0.1em; font-size: 0.75rem; font-weight: 700; color: var(--accent); margin-bottom: 1rem;">
            Step-by-Step Guide
        </div>
        <h1>{content.title}</h1>

        {/* --- ОБНОВЛЕННЫЙ БЛОК НИЖЕ --- */}
      {content.image && content.show_image && (
  <div style="
    width: 100%; 
    max-width: 900px; 
    margin: 2rem auto; 
    display: block;
    line-height: 0;
  ">
    <img 
      src={content.image} 
      alt={content.seo_title || content.title} 
      loading="eager"
      fetchpriority="high"
      /* Меняем на sync, чтобы мобилка отрисовала картинку мгновенно при получении данных */
      decoding="sync" 
      style="
        width: 100%; 
        height: auto; 
        border-radius: 12px; 
        display: block;
        box-shadow: none;
        /* Резервируем место ПЕРЕД загрузкой, чтобы текст не прыгал из нуля */
        content-visibility: auto;
        contain-intrinsic-size: 1px 500px; 
      "
    />
  </div>
)}
        {/* --- КОНЕЦ ОБНОВЛЕННОГО БЛОКА --- */}

        <section class="guide-content">
            <slot /> 
        </section>
    </article>
</Layout>
